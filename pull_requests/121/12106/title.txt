Fix infinite loop in MemReader::read_until.