trait-based serialization and auto-serialization