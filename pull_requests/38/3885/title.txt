rustc: Implement typechecking for automatically-derived enums