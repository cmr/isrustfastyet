Cleanup how we handle proto in types, remove unsound subtyping