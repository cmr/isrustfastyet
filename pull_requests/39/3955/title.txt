librustc: Implement deriving with a unit return type