librustc: Implement moves based on type