more work on the map trait and TreeMap/LinearMap