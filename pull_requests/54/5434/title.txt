Split the deriving code into submodules for each trait