Fixing json decoding for enums, global type constraints, pretty printing debug!, and other fixes