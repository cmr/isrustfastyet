libcore: fix overflow/underflow in range_step