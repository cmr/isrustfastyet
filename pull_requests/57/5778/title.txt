Remove enum layout assumptions from type visitor