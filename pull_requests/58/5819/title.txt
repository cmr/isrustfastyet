Part 1 of rewriting auto_encode to use deriving