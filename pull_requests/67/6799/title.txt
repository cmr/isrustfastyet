Further refactor optimization pass handling