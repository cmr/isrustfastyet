Trans refactor part 1