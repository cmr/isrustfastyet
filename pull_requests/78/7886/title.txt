Trait data structure and metadata changes, and a default method bug fix