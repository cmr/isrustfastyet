visitor trait rewrite step 4 (of 5).