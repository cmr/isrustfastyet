Rewrite lint passes with less visitor cruft