extra::tempfile: replace mkdtemp with an RAII wrapper (Closes #9763)